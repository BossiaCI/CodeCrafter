
## Documentation

#### Architecture Globale
L'application s'articule autour de plusieurs composant cl√©s qui communiquent entre eux pour offir une exp√©rience fluide et performante.

1. #### Structure de Modules Principaux
Module Core (core/) - Le coeur de l'application contenant la logique m√©tier fondamentale, incluant l'analyse syntaxique (AST parsing), l'indexation du code, la gestion du contexte projet.

Module LLM (llm/) - L'interface avec les mod√®les de langage (API Claude, mais extensible √† d'autres), g√©rant le streaming, la gestion des tokens, et les retry avec backoff exponentiel.

Module Memory (memory/) - Le syst√®me de m√©moire contextuelle utilisant une base vectorielle (qdrant ou milvus) pour l'embedding et la r√©cup√©ration s√©mantique, avec un cache LRU pour les requ√™tes fr√©quentes.

Module Analysis (analysis/) - Les outils d'analyse statique du code, d√©tection d'erreurs (via clippy pour Rust, eslint pour JS, etc.), calcul de m√©triques de complexit√©, et analyse de d√©pendances.

Module Refactoring (refactoring/) - Les strat√©gies de refactoring automatis√©, la d√©tection de code smell, et les suggestions d'am√©lioration bas√©es sur les patterns.

Module Documentation (docs/) - La g√©n√©ration de documentation avec extraction automatique de commentaires, g√©n√©ration de diagrammes (PlantUML, Mermaid), et cr√©ation de documentation interactive.

Module CLI (cli/) - L'interface en ligne de commande avec parsing des arguments (clap), gestion des commandes interactives, et output format√© avec couleurs.

Module Plugins (plugins/) - Les int√©grations IDE avec protocole LSP (Language Server Protocol) pour VS Code et IntelliJ, webhooks pour √©v√©nements, et syst√®me de plugins extensible.



2. #### Architecture de la M√©moire Contextuelle
Le syst√®me de m√©moire est crucial pour maintenir un contexte coh√©rent. Il fonctionne sur plusieurs niveaux :

Niveau 1 - Cache Court Terme : Stockage en m√©moire RAM des 10 derni√®res interactions avec timestamps et m√©tadonn√©es, acc√®s ultra-rapide (< 1ms).

Niveau 2 - Index Vectoriel : Embeddings de tous les fichiers du projet, requ√™tes s√©mantiques pour retrouver le contexte pertinent, mise √† jour incr√©mentale lors des modifications.

Niveau 3 - Graph de Connaissance : Relations entre fonctions, classes, modules, graphe de d√©pendances traversable, d√©tection de patterns d'utilisation.

Niveau 4 - Historique Persistant : Base SQLite locale pour l'historique des sessions, export/import pour partage d'√©quipe, compression des anciennes donn√©es.


3. #### Flux d'Ex√©cution Typique
Voici comment l'assistant traite une requ√™te utilisateur :

Phase 1 - R√©ception : L'utilisateur soumet une commande via CLI ou IDE. Le parser identifie le type de requ√™te (g√©n√©ration, analyse, refactoring, documentation). Le syst√®me charge le contexte du workspace.

Phase 2 - Analyse Contextuelle : Le module Memory r√©cup√®re les fichiers pertinents via recherche vectorielle. L'AST des fichiers concern√©s est pars√© et analys√©. Le graphe de d√©pendances est construit pour comprendre les relations.

Phase 3 - Enrichissement du Prompt : Le contexte est assembl√© en incluant les fichiers pertinents, l'historique r√©cent, les conventions du projet (d√©tect√©es automatiquement), et les erreurs courantes du projet.

Phase 4 - G√©n√©ration LLM : La requ√™te enrichie est envoy√©e au mod√®le avec streaming pour affichage progressif. Les r√©ponses sont valid√©es syntaxiquement avant pr√©sentation. Les suggestions sont class√©es par pertinence et confiance.

Phase 5 - Post-traitement : Le code g√©n√©r√© est format√© selon les conventions du projet. Les tests sont sugg√©r√©s ou g√©n√©r√©s automatiquement. La documentation inline est ajout√©e. L'index vectoriel est mis √† jour.



## Mode CLI interactif:

$ codecraft init
‚úì Projet analys√© : 234 fichiers, 45k lignes
‚úì Index cr√©√© : 1,245 embeddings

$ codecraft ask "Comment fonctionne l'authentification ?"
üîç Analyse du contexte...
üìù L'authentification utilise JWT avec refresh tokens.
   Fichiers cl√©s : auth/jwt.rs, middleware/auth.rs
   
   [Diagramme de s√©quence]
   
   Voulez-vous voir le code d√©taill√© ? (o/n)